<h1>Camera Capture</h1>
<div>
    <video id="video" width="640" height="640" autoplay></video>
</div>
<div>
    <button id="capture">Capture</button>
    <button id="record">Record</button>
    <button id="stop">Stop</button>
</div>
<script>
    const video = document.getElementById('video');
    const captureButton = document.getElementById('capture');
    const recordButton = document.getElementById('record');
    const stopButton = document.getElementById('stop');

    // Accessing the camera
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
        })
        .catch(error => {
            console.error('Error accessing camera:', error);
        });

    // Capturing a photo
    captureButton.addEventListener('click', () => {
        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        const dataURL = canvas.toDataURL('image/png');
        const img = document.createElement('img');
        img.src = dataURL;
        document.body.appendChild(img);
    });

    // Recording a video
    let mediaRecorder;
    let recordedChunks = [];

    recordButton.addEventListener('click', () => {
        recordedChunks = [];
        const options = { mimeType: 'video/webm' };
        mediaRecorder = new MediaRecorder(video.srcObject, options);
        mediaRecorder.addEventListener('dataavailable', event => {
            if (event.data.size > 0) {
                recordedChunks.push(event.data);
            }
        });
        mediaRecorder.start();
    });

    // Stopping the recording
    stopButton.addEventListener('click', () => {
        if (mediaRecorder.state === 'recording') {
            mediaRecorder.stop();
        }
    });

    // Saving the recorded video
    mediaRecorder.addEventListener('stop', () => {
        const blob = new Blob(recordedChunks, { type: 'video/webm' });
        const url = URL.createObjectURL(blob);
        const video = document.createElement('video');
        video.src = url;
        document.body.appendChild(video);
    });
</script>